% !TEX root = ./main.tex

\sjtusetup{
  %
  %******************************
  % 注意：
  %   1. 配置里面不要出现空行
  %   2. 不需要的配置信息可以删除
  %******************************
  %
  % 信息录入
  %
  info = {%
    %
    % 标题
    %
    zh / title           = {上海交通大学学位论文 \LaTeX{} 模板示例文档},
    en / title           = {A Sample Document for \LaTeX-based SJTU Thesis Template},
    %
    % 标题页标题
    %   可使用“\\”命令手动控制换行
    %
    % zh / display-title   = {上海交通大学学位论文\\ \LaTeX{} 模板示例文档},
    % en / display-title   = {A Sample Document \\ for \LaTeX-based SJTU Thesis Template},
    %
    % 关键词
    %
    zh / keywords        = {上海交大, 饮水思源, 爱国荣校},
    en / keywords        = {SJTU, master thesis, XeTeX/LaTeX template},
    %
    % 姓名
    %
    zh / author          = {某\quad{}某},
    en / author          = {Mo Mo},
    %
    % 指导教师
    %
    zh / supervisor      = {某某教授},
    en / supervisor      = {Prof. Mou Mou},
    %
    % 副指导教师
    %
    % assoc-supervisor  = {某某教授},
    % assoc-supervisor* = {Prof. Uom Uom},
    %
    % 学号
    %
    id              = {0010900990},
    %
    % 学位
    %   本科生不需要填写
    %
    zh / degree          = {工学硕士},
    en / degree          = {Master of Engineering},
    %
    % 专业
    %
    zh / major           = {某某专业},
    en / major           = {A Very Important Major},
    %
    % 所属院系
    %
    zh / department      = {某某系},
    en / department      = {Depart of XXX},
    %
    % 答辩日期
    %   使用 ISO 格式 (yyyy-mm-dd)；默认为当前时间
    %
    % date                 = {2023-05-18},
    %
    % 标题页显示日期
    %   覆盖对应标题页的日期显示，原样输出
    %
    % zh / display-date    = {2023 年 5 月},
    %
    % 资助基金
    %
    % zh / fund  = {
    %                {国家 973 项目 (No. 2025CB000000)},
    %                {国家自然科学基金 (No. 81120250000)},
    %              },
    % en / fund  = {
    %                {National Basic Research Program of China (Grant No. 2025CB000000)},
    %                {National Natural Science Foundation of China (Grant No. 81120250000)},
    %              },
  },
  %
  % 风格设置
  %
  style = {%
    %
    % 论文标题页 logo 颜色 (red/blue/black)
    %
    % title-logo-color = black,
  },
  %
  % 名称设置
  %
  name = {
    % bib             = {References},
    % ack             = {谢\hspace{\ccwd}辞},
    % achv            = {攻读学位期间完成的论文},
  },
}

% 使用 BibLaTeX 处理参考文献
%   biblatex-gb7714-2015 常用选项
%     gbnamefmt=lowercase     姓名大小写由输入信息确定
%     gbpub=false             禁用出版信息缺失处理
\usepackage[backend=biber,style=gb7714-2015,gbnamefmt=lowercase,url=false,doi=false]{biblatex}
% 文献表字体
% \renewcommand{\bibfont}{\zihao{5}\fixedlineskip{15.6bp}}
% 文献表条目间的间距
\setlength{\bibitemsep}{0pt}
% 导入参考文献数据库
\addbibresource{refs.bib}

% 脚注格式
\usepackage[perpage,bottom,hang]{footmisc}

% 定义图片文件目录与扩展名
\graphicspath{{figures/}}
\DeclareGraphicsExtensions{.pdf,.eps,.png,.jpg,.jpeg}

% 确定浮动对象的位置，可以使用 [H]，强制将浮动对象放到这里（可能效果很差）
% \usepackage{float}

% 固定宽度的表格
% \usepackage{tabularx}

% 使用三线表：toprule，midrule，bottomrule。
\usepackage{booktabs}

% 表格中支持跨行
\usepackage{multirow}

% 表格中数字按小数点对齐
\usepackage{dcolumn}
\newcolumntype{d}[1]{D{.}{.}{#1}}

% 使用长表格
\usepackage{longtable}

% 附带脚注的表格
\usepackage{threeparttable}

% 附带脚注的长表格
\usepackage{threeparttablex}

% 插入外置pdf
\usepackage{pdfpages}

% 算法环境宏包
\usepackage[ruled,vlined,linesnumbered]{algorithm2e}
% \usepackage{algorithm, algorithmicx, algpseudocode}

% 定义子图括号格式
\renewcommand{\thesubfigure}{\alph{subfigure})}

% 修改目录行间距
\setlength{\cftbeforechapskip}{1bp}
\setlength{\cftbeforesecskip}{1bp}
\setlength{\cftbeforesubsecskip}{1bp}

% 重新定义题目格式
\newcommand{\reTitle}[1]{
  % 检查当前页码，如果是偶数页则新开一页
  \ifthenelse{\isodd{\value{page}}}
  {}
  {\newpage}
  \begin{center}
      ~\par
      \heiti{\fontsize{16bp}{19.2pt}\selectfont #1}\\
  \end{center}
}
\newcommand{\reTitleEN}[1]{
  % 检查当前页码，如果是偶数页则新开一页
  \ifthenelse{\isodd{\value{page}}}
  {}
  {\newpage}
  \begin{center}
      ~\par
      \textbf{\fontsize{16bp}{19.2pt}\selectfont #1}\\
  \end{center}
}

% % 重新定义摘要环境
% \newcommand{\reAbstract}{
%   \addcontentsline{toc}{chapter}{摘要}
%   \begin{center}
%     \heiti{\fontsize{16bp}{16.8pt}\selectfont 摘要}\\
%   \end{center}
% }
% \newcommand{\reAbstractEN}{
%   \addcontentsline{toc}{chapter}{Abstract}
%   \begin{center}
%     \textbf{\fontsize{16bp}{16.8pt}\selectfont ABSTRACT}\\
%   \end{center}
% }
% 重新定义摘要环境
\newcommand{\reAbstract}{
  \phantomsection
  % \pdfbookmark[0]{摘 \quad 要}{摘 \quad 要}
  \addcontentsline{toc}{chapter}{\heiti{\fontsize{12bp}{14.4pt}\selectfont 摘 \quad 要} }
  \begin{center}
    \heiti{\fontsize{16bp}{16.8pt}\selectfont 摘 \quad 要}\\
  \end{center}
}
\newcommand{\reAbstractEN}{
  \phantomsection
  % \pdfbookmark[0]{ABSTRACT}{ABSTRACT}
  \addcontentsline{toc}{chapter}{{\fontsize{12bp}{14.4pt}\selectfont ABSTRACT}}
  \begin{center}
    \textbf{\fontsize{16bp}{16.8pt}\selectfont ABSTRACT}\\
  \end{center}
}
\newcommand{\reKeyword}[1]{
    ~\par
    \noindent \heiti{\fontsize{14bp}{16.8bp}\selectfont 关键词：}\songti{\fontsize{14bp}{16.8bp}\selectfont #1}
    \clearpage
}
\newcommand{\reKeywordEN}[1]{
    ~\par
    \noindent \textbf{\fontsize{14bp}{16.8bp}\selectfont Key words: }#1
    \clearpage
}

% 使一个页面的两张图像紧凑连接
\usepackage{nomencl}
\renewcommand{\floatpagefraction}{.95}
\makenomenclature

% 代码环境宏包
\usepackage{listings}
\lstdefinestyle{lstStyleCode}{%
  aboveskip         = \medskipamount,
  belowskip         = \medskipamount,
  basicstyle        = \ttfamily\zihao{6},
  commentstyle      = \slshape\color{black!60},
  stringstyle       = \color{green!40!black!100},
  keywordstyle      = \bfseries\color{blue!50!black},
  extendedchars     = false,
  upquote           = true,
  tabsize           = 2,
  showstringspaces  = false,
  xleftmargin       = 1em,
  xrightmargin      = 1em,
  breaklines        = false,
  framexleftmargin  = 1em,
  framexrightmargin = 1em,
  backgroundcolor   = \color{gray!10},
  columns           = flexible,
  keepspaces        = true,
  texcl             = true,
  mathescape        = true
}
\lstnewenvironment{codeblock}[1][]{%
  \lstset{style=lstStyleCode,#1}}{}

% 直立体数学符号
\providecommand{\dd}{\mathop{}\!\mathrm{d}}
\providecommand{\ee}{\mathrm{e}}
\providecommand{\ii}{\mathrm{i}}
\providecommand{\jj}{\mathrm{j}}

% 国际单位制宏包
\usepackage{siunitx}

% 定理环境宏包
\usepackage{ntheorem}
% \usepackage{amsthm}

% 绘图宏包
\usepackage{tikz}
\usetikzlibrary{arrows.meta, shapes.geometric}

% 数据图表宏包
\usepackage{pgfplots}
\pgfplotsset{compat=newest}

% 一些文档中用到的 logo
\usepackage{hologo}
\providecommand{\XeTeX}{\hologo{XeTeX}}
\providecommand{\BibLaTeX}{\textsc{Bib}\LaTeX}

% 借用 ltxdoc 里面的几个命令方便写文档
\DeclareRobustCommand\cs[1]{\texttt{\char`\\#1}}
\providecommand\pkg[1]{{\sffamily#1}}

% hyperref 宏包在最后调用
\usepackage{hyperref}

% E-mail
\providecommand{\email}[1]{\href{mailto:#1}{\urlstyle{tt}\nolinkurl{#1}}}
